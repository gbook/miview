FIND_PACKAGE(Java 1.5 REQUIRED) # javac, jar
FIND_PACKAGE(JNI REQUIRED)
INCLUDE_DIRECTORIES(
  #${JNI_INCLUDE_PATH}
  ${JAVA_INCLUDE_PATH}
  ${JAVA_INCLUDE_PATH2}
  ${JAVA_AWT_INCLUDE_PATH}
  )

SET(ENV{CLASSPATH}
  ${LIBRARY_OUTPUT_PATH}/vtkgdcm.jar:
)
ADD_CUSTOM_COMMAND(
  OUTPUT ${EXECUTABLE_OUTPUT_PATH}/HelloVTKWorld.class
  COMMAND ${JAVA_COMPILE} ARGS ${CMAKE_CURRENT_SOURCE_DIR}/HelloVTKWorld.java -d ${EXECUTABLE_OUTPUT_PATH}
  WORKING_DIRECTORY ${CMAKE_CURRENT_BINARY_DIR}
  DEPENDS ${CMAKE_CURRENT_SOURCE_DIR}/HelloVTKWorld.java
  COMMENT "javac HelloVTKWorld.java"
)

# 3. ok now add the target
ADD_CUSTOM_TARGET(GDCMJavaVTKExample ALL
  DEPENDS ${EXECUTABLE_OUTPUT_PATH}/HelloVTKWorld.class
  COMMENT "building gdcm java example"
)

IF(BUILD_TESTING)
IF(GDCM_DATA_ROOT)
  ADD_JAVA_TEST(TestHelloVTKWorldJava ${EXECUTABLE_OUTPUT_PATH}/HelloVTKWorld ${GDCM_DATA_ROOT}/012345.002.050.dcm)
ENDIF(GDCM_DATA_ROOT)
ENDIF(BUILD_TESTING)
